var Q=Object.defineProperty;var X=(a,t,e)=>t in a?Q(a,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):a[t]=e;var n=(a,t,e)=>(X(a,typeof t!="symbol"?t+"":t,e),e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const p of l.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&s(p)}).observe(document,{childList:!0,subtree:!0});function e(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerpolicy&&(l.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?l.credentials="include":o.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(o){if(o.ep)return;o.ep=!0;const l=e(o);fetch(o.href,l)}})();class Z{dispatch(t,e){for(let s of t)switch(console.log("Dispatching "+s&&s.Name?s.Name:"?"),s.Name){case"Message":this.dispatchMessage(s.Data,e.navbar);break;case"LoginResponse":let o=s.Data;this.dispatchUserUpdate(o,e);break;case"ProfileUpdateResponse":let l=s.Data;this.dispatchProfileUpdateResponse(l,e);case"Token":let p=s.Data;this.dispatchToken(p,e);break;case"NewPassResponse":let m=s.Data;this.dispatchNewPassResponse(m,e);break;case"FullPage":let v=s.Data;this.dispatchFullPageResponse(v,e);break;case"Comment":let y=s.Data;this.dispatchCommentUpdate(y,e);break;case"LogoutResponse":this.dispatchUserUpdate(void 0,e);break;case"FeedbackReport":let L=s.Data;this.dispatchFeedbackReport(L,e);break;case"AdminUsersReport":let A=s.Data;this.dispatchUsersReport(A,e);break}}dispatchToken(t,e){e.fetcher.setToken(t.JWT)}dispatchMessage(t,e){e.message.updateMessage(t)}dispatchFullPageResponse(t,e){e.navbar.commentsWindow.populateNewComments(t)}dispatchCommentUpdate(t,e){e.navbar.commentsWindow.updateComment(t)}dispatchUserUpdate(t,e){e.state.loadProfile(t,!1)}dispatchProfileUpdateResponse(t,e){e.state.loadProfile(t,!0)}dispatchNewPassResponse(t,e){e.navbar.newPassWindow.parseNewPassResponse(t),this.dispatchMessage(t,e.navbar)}dispatchFeedbackReport(t,e){e.navbar.adminWindow.feedbackReport.update(t.Records)}dispatchUsersReport(t,e){e.navbar.adminWindow.usersReport.update(t)}}const ee="http://localhost:3000",te="ca-auth-tok";class ie{constructor(){n(this,"responses");n(this,"token");this.responses=[],this.token=""}async fetch(t,e,s,o){let l=ee+"/"+t,p=new Headers;p.set("Content-Type","application/json"),p.set(te,this.token),await fetch(l,{method:e,mode:"cors",headers:p,body:JSON.stringify(s)}).then(m=>m.json()).then(m=>{this.responses=m}).catch(m=>{console.error("Error fetching from server!",m);let v={Success:!1,Text:"Error fetching from server!"},y=new CustomEvent("FrontEndError",{detail:v});document.dispatchEvent(y)}),o()}getAndClearResponses(){let t=this.responses;return this.responses=[],t}setToken(t){this.token=t}}var i;(a=>{function t(d,r){let c=o("input",r);return c.type=d,c}a.createInputElement=t;function e(d,r,...c){let u=o(d,r);for(let h of c)u.append(h);return u}a.createContainer=e;function s(d,r,c,u,h){let E=l("label",d,r);return a.createContainer(c,h,E,u)}a.createContainerWithLabel=s;function o(d,r,c){let u=document.createElement(d);if(c!==void 0)for(let h of Object.keys(c))u.style[h]=c[h];if(r!==void 0&&r!=="")if(Array.isArray(r))for(let h of r)u.classList.add(h);else u.classList.add(r);return u}a.el=o;function l(d,r,c,u){let h=a.el(d,c,u);return h.textContent=r||"",h}a.textEl=l;function p(d,r,c){return l("div",d,r,c)}a.div=p;function m(d,r,c){return l("button",d,r,c)}a.button=m;function v(d,r,c){return l("span",d,r,c)}a.span=v;function y(d,r,c,u,h){let E=l("td",d,u),w;r.tagName!="TD"?(w=o("td",h),w.append(r)):(w=r,h!=null&&(Array.isArray(h)?w.classList.add(...h):w.classList.add(h)));let V=o("tr",c);return V.append(E,w),V}a.tableRow=y;function L(d,r,c){let u=a.el("option",c);return u.textContent=d,u.value=r??d,u}a.option=L;function A(d,r,c,u){let h=[];r==null?h=d:d.length!=r.length?(console.error("Unmatched array lengths when creating select button!",r),r=d):h=r;let E=a.el("select",c);for(let w=0;w<d.length;w++){let V=a.option(d[w],h[w],u);E.append(V)}return E}a.select=A})(i||(i={}));const se={cafeWindow:"cafe-window"};class P{constructor(t,e){n(this,"el");this.el=document.createElement("div"),Array.isArray(e)?this.el.classList.add(...e):e!=null&&this.el.classList.add(e),t!=null&&(this.el.id=t),this.el.classList.add(se.cafeWindow)}show(){this.el.style.display="block"}hide(){this.el.style.display="none"}}const k={windowName:"cafe-login-window",inputSection:"cafe-window-input-section",inputField:"cafe-window-input-field",inputLabel:"cafe-window-input-label",button:"cafe-window-button"};class ne extends P{constructor(){super(k.windowName,"Login");n(this,"username");n(this,"password");n(this,"submitLoginButton");n(this,"forgotPasswordButton");this.username=i.createInputElement("text",k.inputField),this.password=i.createInputElement("password",k.inputField),this.submitLoginButton=i.button("Login",k.button),this.forgotPasswordButton=i.button("Forgot Password",k.button),this.submitLoginButton.addEventListener("click",this.submitLoginClicked.bind(this)),this.forgotPasswordButton.addEventListener("click",this.forgotPasswordClicked.bind(this)),this.el.append(i.createContainerWithLabel("Username",k.inputLabel,"div",this.username,k.inputSection),i.createContainerWithLabel("Password",k.inputLabel,"div",this.password,k.inputSection),this.submitLoginButton,this.forgotPasswordButton)}submitLoginClicked(){let e={Username:this.username.value,Password:this.password.value},s=new CustomEvent("login",{detail:e});document.dispatchEvent(s)}forgotPasswordClicked(){let e=new CustomEvent("StateChangeRequest",{detail:"forgotpassword"});document.dispatchEvent(e)}}const g={windowName:"cafe-register-window",inputSection:"cafe-window-input-section",inputField:"cafe-window-input-field",inputLabel:"cafe-window-input-label",button:"cafe-window-button"};class oe extends P{constructor(){super(g.windowName,"Register");n(this,"username");n(this,"password");n(this,"rePassword");n(this,"email");n(this,"agreedToTerms");n(this,"submitRegister");this.username=i.createInputElement("text",g.inputField),this.password=i.createInputElement("password",g.inputField),this.rePassword=i.createInputElement("password",g.inputField),this.email=i.createInputElement("email",g.inputField),this.agreedToTerms=i.createInputElement("checkbox",g.inputField),this.submitRegister=i.button("Register",g.button),this.submitRegister.addEventListener("click",this.submitRegisterClicked.bind(this)),this.el.append(i.createContainerWithLabel("Username",g.inputLabel,"div",this.username,g.inputSection),i.createContainerWithLabel("Password",g.inputLabel,"div",this.password,g.inputSection),i.createContainerWithLabel("Retype Password",g.inputLabel,"div",this.rePassword,g.inputSection),i.createContainerWithLabel("Email",g.inputLabel,"div",this.email,g.inputSection),i.createContainerWithLabel("Agree to Terms",g.inputLabel,"div",this.agreedToTerms,g.inputSection),this.submitRegister)}submitRegisterClicked(){let e={Username:this.username.value,Password:this.password.value,RetypePassword:this.rePassword.value,Email:this.email.value,AgreedToTerms:this.agreedToTerms.checked},s=new CustomEvent("register",{detail:e});document.dispatchEvent(s)}}const O={windowName:"cafe-pw-reset-window",inputField:"cafe-window-input-field",inputLabel:"cafe-window-input-label",inputSection:"cafe-window-input-section"};class ae extends P{constructor(){super(O.windowName);n(this,"email");n(this,"submitPWResetRequestButton");this.email=i.createInputElement("email",O.inputField),this.submitPWResetRequestButton=i.button("Reset Password"),this.submitPWResetRequestButton.addEventListener("click",this.submitButtonClicked.bind(this)),this.el.append(i.createContainerWithLabel("Email",O.inputLabel,"div",this.email,O.inputSection),this.submitPWResetRequestButton)}submitButtonClicked(){let e={Email:this.email.value},s=new CustomEvent("pwResetReq",{detail:e});document.dispatchEvent(s);let o=new CustomEvent("StateChangeRequest",{detail:"newPassword"});document.dispatchEvent(o)}}const b={windowName:"cafe-new-password-window",inputSection:"cafe-window-input-section",inputField:"cafe-window-input-field",inputLabel:"cafe-window-input-label",button:"cafe-window-button"};class le extends P{constructor(){super(b.windowName,"NewPassword");n(this,"email");n(this,"code");n(this,"newPassword");n(this,"reNewPassword");n(this,"submitButton");this.email=i.createInputElement("email",b.inputField),this.code=i.createInputElement("text",b.inputField),this.newPassword=i.createInputElement("password",b.inputField),this.reNewPassword=i.createInputElement("password",b.inputField),this.submitButton=i.button("Submit new password",b.button),this.submitButton.addEventListener("click",this.submitButtonClicked.bind(this)),this.el.append(i.createContainerWithLabel("Email",b.inputLabel,"div",this.email,b.inputSection),i.createContainerWithLabel("Code",b.inputLabel,"div",this.code,b.inputSection),i.createContainerWithLabel("New password",b.inputLabel,"div",this.newPassword,b.inputSection),i.createContainerWithLabel("Retype password",b.inputLabel,"div",this.reNewPassword,b.inputSection),this.submitButton)}submitButtonClicked(){console.log("ðŸ‘¶ submit new pass clicked");let e=Number(this.code.value);if(!isNaN(e)){let s={Email:this.email.value,Code:e,Password:this.newPassword.value,RetypePassword:this.reNewPassword.value},o=new CustomEvent("newPassword",{detail:s});document.dispatchEvent(o)}}parseNewPassResponse(e){if(e.Success==!0){let s=new CustomEvent("StateChangeRequest",{detail:"login"});document.dispatchEvent(s)}}}class U{constructor(t,e="div"){n(this,"data");n(this,"el");n(this,"blocker");n(this,"listeners");this.data=t,this.el=i.el(e,void 0,{position:"relative",zIndex:"0"}),this.blocker=i.div(void 0,void 0,{position:"absolute",top:"0px",left:"0px",width:"100%",height:"100%",zIndex:"-1"}),this.el.append(this.blocker),this.listeners=[]}clickListen(t,e,s=!0){if(s)if(Array.isArray(e)){let o=[];for(let l of e)o.push(l.bind(this));e=o}else e=e.bind(this);if(Array.isArray(t))if(Array.isArray(e))for(let o of t)for(let l of e)o.addEventListener("click",l),this.listeners.push([o,l,"click"]);else for(let o of t)o.addEventListener("click",e),this.listeners.push([o,e,"click"]);else if(Array.isArray(e))for(let o of e)t.addEventListener("click",o),this.listeners.push([t,o,"click"]);else t.addEventListener("click",e),this.listeners.push([t,e,"click"])}disable(){this.blocker.style.backgroundColor="rgba(200,200,200,0.5)",this.blocker.style.zIndex="1"}enable(){}destroy(){for(let t of this.listeners){let[e,s,o]=t;e.removeEventListener(o,s)}this.el.remove()}}const x={message_class:"server-message",message_success_false:"server-message-success-false",message_success_true:"server-message-success-true"};class re extends U{constructor(){super({Success:!0,Text:"Welcome"});n(this,"displayedText");this.displayedText=i.div(void 0,x.message_class),this.el.appendChild(this.displayedText),this.displayedText.classList.add(x.message_success_true),this.updateMessage(this.data)}updateMessage(e){e!=null&&(this.el.removeChild(this.displayedText),this.el.append(this.displayedText),e.Success?(this.displayedText.classList.remove(x.message_success_false),this.displayedText.classList.add(x.message_success_true)):(this.displayedText.classList.remove(x.message_success_true),this.displayedText.classList.add(x.message_success_false)),this.displayedText.textContent=e.Text,this.data=e)}clearMessage(){this.updateMessage({Success:!0,Text:""})}}class T{constructor(t){n(this,"el");n(this,"listeners");this.el=i.div(),t!=null&&(Array.isArray(t)?t.forEach(e=>{this.el.classList.add(e)}):this.el.classList.add(t)),this.listeners=[]}destroy(){for(let t of this.listeners){let[e,s,o]=t;e.removeEventListener(o,s)}this.el.remove()}clickListen(t,e,s=!0){if(s)if(Array.isArray(e)){let o=[];for(let l of e)o.push(l.bind(this));e=o}else e=e.bind(this);if(Array.isArray(t))if(Array.isArray(e))for(let o of t)for(let l of e)o.addEventListener("click",l),this.listeners.push([o,l,"click"]);else for(let o of t)o.addEventListener("click",e),this.listeners.push([o,e,"click"]);else if(Array.isArray(e))for(let o of e)t.addEventListener("click",o),this.listeners.push([t,o,"click"]);else t.addEventListener("click",e),this.listeners.push([t,e,"click"])}}class de extends T{constructor(e){super();n(this,"email");n(this,"password");n(this,"newEmail");n(this,"changeButton");n(this,"submitButton");n(this,"passwordDiv");n(this,"emailDiv");this.email=i.div(),this.changeButton=i.button("Change email"),this.passwordDiv=i.div(void 0,void 0,{display:"none"});let s=i.textEl("label","Password");this.password=i.createInputElement("password"),this.passwordDiv.append(s,this.password),this.emailDiv=i.div(void 0,void 0,{display:"none"});let o=i.textEl("label","New Email");this.newEmail=i.createInputElement("text"),this.emailDiv.append(o,this.newEmail),this.submitButton=i.button("Submit",void 0,{display:"none"}),this.el.append(this.email,this.changeButton,this.passwordDiv,this.emailDiv,this.submitButton),this.update(e),this.clickListen(this.changeButton,this.changeButtonClicked,!0),this.clickListen(this.submitButton,this.submitButtonClicked,!0)}update(e){e!=null&&(this.email.textContent=e)}changeButtonClicked(){this.submitButton.style.display=="none"?(this.emailDiv.style.display="block",this.newEmail.value="",this.passwordDiv.style.display="block",this.password.value="",this.submitButton.style.display="block"):(this.emailDiv.style.display="none",this.passwordDiv.style.display="none",this.submitButton.style.display="none")}submitButtonClicked(){let e={NewEmail:this.newEmail.value,Password:this.password.value},s=new CustomEvent("changeEmail",{detail:e});document.dispatchEvent(s),this.changeButtonClicked()}}class ce extends T{constructor(e){super();n(this,"profileBlurb");n(this,"editProfileBlurbButton");n(this,"editProfileTextarea");n(this,"editProfileSubmitButton");n(this,"editProfileBlurbDiv");this.profileBlurb=i.div(),this.editProfileBlurbButton=i.button("Edit"),this.editProfileBlurbDiv=i.div(void 0,void 0,{display:"none"}),this.editProfileTextarea=i.el("textarea"),this.editProfileSubmitButton=i.button("Submit"),this.editProfileBlurbDiv.append(this.editProfileTextarea,this.editProfileSubmitButton),this.clickListen(this.editProfileBlurbButton,this.toggleProfileTextArea,!0),this.clickListen(this.editProfileSubmitButton,this.submitProfileEditClicked,!0),this.el.append(this.profileBlurb,this.editProfileBlurbButton,this.editProfileBlurbDiv),this.update(e)}submitProfileEditClicked(){let e={NewBlurb:this.editProfileTextarea.value},s=new CustomEvent("changeProfile",{detail:e});document.dispatchEvent(s),this.toggleProfileTextArea()}update(e){e!=null?this.profileBlurb.textContent=e:this.profileBlurb.textContent=""}toggleProfileTextArea(){this.profileBlurb.style.display=="none"?(this.editProfileBlurbDiv.style.display="none",this.profileBlurb.style.display="block"):(this.profileBlurb.style.display="none",this.editProfileBlurbDiv.style.display="block",this.editProfileTextarea.value=this.profileBlurb.textContent?this.profileBlurb.textContent:"")}}const B={profileRow:"profile-info-row"};class he extends U{constructor(e){super(e);n(this,"username");n(this,"createdOn");n(this,"domainsModerating");n(this,"isAdmin");n(this,"isDomainModerator");n(this,"isGlobalModerator");n(this,"emailSection");n(this,"profileBlurbSection");let s=i.div(void 0,B.profileRow),o=i.textEl("label","Username");this.username=i.div(),s.append(o,this.username);let l=i.div(void 0,B.profileRow),p=i.textEl("label","Email");this.emailSection=new de,l.append(p,this.emailSection.el);let m=i.div(void 0,B.profileRow),v=i.textEl("label","About");this.profileBlurbSection=new ce,m.append(v,this.profileBlurbSection.el);let y=i.div(void 0,B.profileRow),L=i.textEl("label","Created On");this.createdOn=i.div(),y.append(L,this.createdOn);let A=i.div(void 0,B.profileRow),d=i.textEl("label","Domains Moderating");this.domainsModerating=i.div(),A.append(d,this.domainsModerating);let r=i.div(void 0,B.profileRow),c=i.textEl("label","isAdmin");this.isAdmin=i.div(),r.append(c,this.isAdmin);let u=i.div(void 0,B.profileRow),h=i.textEl("label","domain mod?");this.isDomainModerator=i.div(),u.append(h,this.isDomainModerator);let E=i.div(void 0,B.profileRow),w=i.textEl("label","global mod?");this.isGlobalModerator=i.div(),E.append(w,this.isGlobalModerator),this.el.append(s,l,m,y,A,r,u,E),this.updateProfile({LoggedInAs:e,Email:""})}updateProfile(e){e.LoggedInAs!=null?(this.data=e.LoggedInAs,this.username.textContent=this.data.Username,this.createdOn.textContent=new Date(this.data.CreatedOn).toLocaleDateString(),this.domainsModerating.textContent=this.data.DomainsModerating,this.isAdmin.textContent=this.data.IsAdmin?"yes":"no",this.isDomainModerator.textContent=this.data.DomainsModerating?this.data.DomainsModerating:"",this.isGlobalModerator.textContent=this.data.IsGlobalModerator?"yes":"no",this.emailSection.update(e.Email?e.Email:""),this.profileBlurbSection.update(this.data.ProfileBlurb)):(this.username.textContent="",this.createdOn.textContent="",this.domainsModerating.textContent="",this.isAdmin.textContent="",this.isDomainModerator.textContent="",this.isGlobalModerator.textContent="",this.emailSection.update(""),this.profileBlurbSection.update(""))}}class ue extends P{constructor(){super("cafe-settings");n(this,"passwordResetButton");n(this,"ownProfile");let e=i.textEl("h2","About You");this.ownProfile=new he(void 0),this.passwordResetButton=i.button("Request password reset"),this.passwordResetButton.addEventListener("click",this.passwordResetClicked.bind(this)),this.el.append(e,this.ownProfile.el,this.passwordResetButton)}passwordResetClicked(){let e=new CustomEvent("StateChangeRequest",{detail:"forgotpassword"});document.dispatchEvent(e)}}const G={sortRow:"profile-info-row"};class pe extends U{constructor(e){super(e);n(this,"sortBy");n(this,"viewHidden");n(this,"sortAscending");n(this,"sortBy_option1");n(this,"sortBy_option2");n(this,"sortBy_option3");n(this,"sortBy_option4");this.sortBy=i.el("select"),this.viewHidden=i.createInputElement("checkbox"),this.sortAscending=i.createInputElement("checkbox"),this.sortBy_option1=i.el("option"),this.sortBy_option2=i.el("option"),this.sortBy_option3=i.el("option"),this.sortBy_option4=i.el("option"),this.sortBy_option1.text="new",this.sortBy_option2.text="funny",this.sortBy_option3.text="factual",this.sortBy_option4.text="agree",this.sortBy.add(this.sortBy_option1),this.sortBy.add(this.sortBy_option2),this.sortBy.add(this.sortBy_option3),this.sortBy.add(this.sortBy_option4);let s=i.textEl("label","Sort by"),o=i.textEl("label","View hidden"),l=i.textEl("label","Sort by ascending"),p=i.div(void 0,G.sortRow),m=i.div(void 0,G.sortRow),v=i.div(void 0,G.sortRow);p.append(s,this.sortBy),m.append(o,this.viewHidden),v.append(l,this.sortAscending),this.clickListen(this.sortBy_option1,this.emitStateChangeRequest,!0),this.clickListen(this.sortBy_option2,this.emitStateChangeRequest,!0),this.clickListen(this.sortBy_option3,this.emitStateChangeRequest,!0),this.clickListen(this.sortBy_option4,this.emitStateChangeRequest,!0),this.clickListen(this.sortAscending,this.emitStateChangeRequest,!0),this.clickListen(this.viewHidden,this.emitStateChangeRequest,!0),this.el.append(p,m,v)}settingsChange(e){this.data=e,console.log("settingChangRecieved called in CommentSort with data",e),this.sortAscending.checked=e.sortAscending,this.sortBy.value=e.sortedBy,this.viewHidden.checked=e.viewHidden}emitStateChangeRequest(){let e=this.sortBy.value,s={settings:{viewHidden:this.viewHidden.checked,sortAscending:this.sortAscending.checked,sortedBy:e}},o=new CustomEvent("StateChangeRequest",{detail:s});document.dispatchEvent(o)}}const $={textArea:"comment-reply-textarea",submit:"comment-reply-submit"};class K extends T{constructor(e,s=!1){super();n(this,"openbutton");n(this,"replyArea");n(this,"content");n(this,"submit");n(this,"repliesTo");n(this,"alwaysOpen");this.repliesTo=e,this.alwaysOpen=s,this.openbutton=i.button("Reply"),this.replyArea=i.div(),this.content=i.el("textarea",$.textArea,{display:"none"}),s?this.submit=i.button("Submit New Comment",$.submit):this.submit=i.button("Reply To Comment",$.submit,{display:"none"}),this.replyArea.append(this.content,this.submit),s?(this.el.append(this.replyArea),this.toggleReplyArea()):this.el.append(this.openbutton,this.replyArea),this.clickListen(this.openbutton,this.toggleReplyArea,!0),this.clickListen(this.submit,this.submitClicked,!0)}toggleReplyArea(){this.content.style.display=="none"?(this.content.style.display="block",this.alwaysOpen||(this.submit.style.display="block")):(this.content.style.display="none",this.alwaysOpen||(this.submit.style.display="none"))}submitClicked(){let e={ReplyingTo:this.repliesTo,Reply:this.content.value};this.content.value="";let s=new CustomEvent("newComment",{detail:e});document.dispatchEvent(s),this.alwaysOpen||this.toggleReplyArea()}}const M="/assets/arrow-f047fad3.svg",F={upvotebutton:"comment-vote-button",downvotebutton:"comment-vote-button",numberDisplay:"comment-vote-number-display",categoryDisplay:"comment-vote-category-display",voteContainer:"comment-vote-container"};class z extends U{constructor(e,s,o){super(o);n(this,"commentId");n(this,"voteType");n(this,"up");n(this,"down");n(this,"total");this.el.classList.add(F.voteContainer),this.commentId=s,this.voteType=e;let l=i.textEl("label",e,F.categoryDisplay);this.up=i.button("",F.upvotebutton,{backgroundImage:`url(${M})`,backgroundSize:"contain",transform:"rotate(180deg)"}),this.up.style.backgroundImage=`url(${M})`,this.down=i.button("",F.downvotebutton,{backgroundImage:`url(${M})`,backgroundSize:"contain"}),this.total=i.div(String(o.Ups+o.Downs),F.numberDisplay),this.el.append(this.up,l,this.total,this.down),this.clickListen(this.up,this.upVoteClicked,!0),this.clickListen(this.down,this.downVoteClicked,!0)}update(e){this.data=e,this.total.textContent=String(e.Ups+e.Downs)}upVoteClicked(){let e={VotingOn:this.commentId,VoteType:this.voteType,Value:1},s=new CustomEvent("voteComment",{detail:e});document.dispatchEvent(s)}downVoteClicked(){let e={VotingOn:this.commentId,VoteType:this.voteType,Value:-1},s=new CustomEvent("voteComment",{detail:e});document.dispatchEvent(s)}}class me extends T{constructor(e){super();n(this,"funny");n(this,"factual");n(this,"agree");this.funny=new z("funny",e.CommentId,e.Funny),this.factual=new z("factual",e.CommentId,e.Factual),this.agree=new z("agree",e.CommentId,e.Agree),this.el.append(this.funny.el,this.factual.el,this.agree.el)}update(e){this.funny.update(e.Funny),this.factual.update(e.Factual),this.agree.update(e.Agree)}}const D={usernameHeader:"username-header",baseComment:"cafe-comment",childComments:"comment-child-container",content:"cafe-comment-content",postTime:"cafe-comment-posted-time",collapseButton:"cafe-comment-collapse-button"};class ge extends U{constructor(e){super(e);n(this,"username");n(this,"content");n(this,"replySection");n(this,"childContainer");n(this,"collapseButton");n(this,"submittedAt");n(this,"voteSection");this.el.classList.add(D.baseComment),this.username=i.el("div",D.usernameHeader),this.content=i.el("div",D.content),this.replySection=new K(e.CommentId),this.childContainer=i.div(void 0,D.childComments),this.collapseButton=i.div("",D.collapseButton,{backgroundImage:`url(${M})`,backgroundSize:"contain",transform:"rotate(90deg)"}),this.username.textContent=e==null?"":e.Username,this.content.textContent=e==null?"":e.Content,this.voteSection=new me(e),this.clickListen(this.collapseButton,this.toggleCollapsedChildren,!0),this.childContainer.style.display="none",this.toggleCollapsedChildren(),this.collapseButton.style.display="none";let s=new Date(e.TimePosted*1e3);this.submittedAt=i.textEl("td",s.toLocaleDateString()+" "+s.toLocaleTimeString(),D.postTime),this.el.append(this.username,this.submittedAt,this.content,this.voteSection.el,this.replySection.el,this.collapseButton,this.childContainer)}toggleCollapsedChildren(){this.childContainer.style.display=="none"?(this.childContainer.style.display="block",this.collapseButton.style.transform="rotate(0deg)"):(this.childContainer.style.display="none",this.collapseButton.style.transform="rotate(270deg)")}reportButtonClicked(){let e=new CustomEvent("StateChangeRequest",{detail:"forgotpassword"});document.dispatchEvent(e)}update(e){this.data=e,this.username.textContent=e.Username,this.content.textContent=e.Content;let s=new Date(e.TimePosted*1e3);this.submittedAt.textContent=s.toLocaleDateString()+" "+s.toLocaleTimeString(),this.voteSection.update(e)}addChild(e){this.childContainer.appendChild(e.el),this.collapseButton.style.display="block"}}class we extends T{constructor(){super();n(this,"purlLabel");n(this,"toggleButton");n(this,"submitButton");n(this,"cancelButton");n(this,"pseudoURL");n(this,"showingAll");this.toggleButton=i.button("Pseudo URL"),this.purlLabel=i.textEl("label","Pseudo URL"),this.pseudoURL=i.createInputElement("url"),this.submitButton=i.button("ðŸŒŽ"),this.cancelButton=i.button("âŒ"),this.toggleButton.style.display="inline",this.showingAll=!1,this.makeAllVisible(!1),this.clickListen(this.toggleButton,this.toggleFold,!0),this.clickListen(this.cancelButton,this.cancelButtonClicked,!0),this.clickListen(this.submitButton,this.submitButtonClicked,!0),this.el.append(this.toggleButton,this.pseudoURL,this.submitButton)}cancelButtonClicked(){let e=new CustomEvent("SettingsChangeRequest",{detail:{onPseudoUrlPage:!1}});document.dispatchEvent(e),this.toggleFold()}submitButtonClicked(){let e=new CustomEvent("StateChangeRequest",{detail:{settings:{onPseudoUrlPage:!0,url:this.pseudoURL.value}}});document.dispatchEvent(e),this.requestCommentsForPseudoURLPage()}settingsChange(e){console.log("Settings change received in pseudo URL section with value",e),e.onPseudoUrlPage&&(this.pseudoURL.value=e.url)}requestCommentsForPseudoURLPage(){let e={Url:this.pseudoURL.value},s=new CustomEvent("getComments",{detail:e});document.dispatchEvent(s)}toggleFold(){this.showingAll?(this.showingAll=!1,this.makeAllVisible(!1)):(this.showingAll=!0,this.makeAllVisible(!0))}makeAllVisible(e){e?(this.purlLabel.style.display="inline",this.pseudoURL.style.display="inline",this.submitButton.style.display="inline",this.cancelButton.style.display="inline"):(this.purlLabel.style.display="none",this.pseudoURL.style.display="none",this.submitButton.style.display="none",this.submitButton.style.display="none")}}const be={commentContainer:"comments-container"};class ve extends P{constructor(){super();n(this,"data");n(this,"displayedComments");n(this,"commentSortSettings");n(this,"commentContainer");n(this,"newCommentSection");n(this,"purlSection");n(this,"currentlyViewing");this.data={Domain:"",Path:"",Comments:[]},this.displayedComments=new Map,this.commentSortSettings=new pe,this.newCommentSection=new K(0,!0),this.purlSection=new we,this.commentContainer=i.div(void 0,be.commentContainer),this.currentlyViewing=i.textEl("div"),this.setCurrentlyViewing(),this.el.append(this.currentlyViewing,this.purlSection.el,this.commentSortSettings.el,this.commentContainer,this.newCommentSection.el)}populateNewComments(e,s="new",o=!1){this.data=e,this.setCurrentlyViewing(e.Domain,e.Path);for(let l of this.displayedComments.values())l.destroy();this.displayedComments.clear(),this.resortComments(s,o);for(let l of this.data.Comments)this.updateComment(l)}setCurrentlyViewing(e,s){e==null||e.length==0?this.currentlyViewing.textContent="Visit a webpage to view comments.":this.currentlyViewing.textContent="You are viewing "+e+"/"+s+"."}settingChangeReceived(e){console.log("settingChangRecieved called in CommentWindow with data",e),this.commentSortSettings.settingsChange(e),this.purlSection.settingsChange(e),this.populateNewComments(this.data,e.sortedBy,e.sortAscending)}updateComment(e){var o;let s=this.displayedComments.get(e.CommentId);if(s==null){let l=new ge(e);this.displayedComments.set(e.CommentId,l),e.Parent!=0?(console.log("Comment",e.CommentId,"has parent ",e.Parent),(o=this.displayedComments.get(e.Parent))==null||o.addChild(l)):(console.log("Comment",e.CommentId,"does not have parent",e.Parent),this.commentContainer.appendChild(l.el))}else s.update(e)}resortComments(e,s){console.log("Getting sorter",e,"ascending",s);let o=fe(e,s);this.data.Comments.sort(o),console.log("Sorted to: ",this.data.Comments)}}function fe(a,t){let e;return a=="funny"?e=Ee:a=="agree"?e=ke:a=="factual"?e=Be:e=q,t||(e=Ce(e)),(s,o)=>{let l=ye(s,o);return l!=0?l:e(s,o)}}function Ce(a){return(t,e)=>a(t,e)*-1}function ye(a,t){return a.Parent-t.Parent}function Ee(a,t){let e=a.Funny.Ups+a.Funny.Downs,s=t.Funny.Ups+t.Funny.Downs;return e==s?q(a,t):e-s}function ke(a,t){let e=a.Funny.Ups+a.Funny.Downs,s=t.Funny.Ups+t.Funny.Downs;return e==s?q(a,t):e-s}function Be(a,t){let e=a.Factual.Ups+a.Factual.Downs,s=t.Factual.Ups+t.Factual.Downs;return e==s?q(a,t):e-s}function q(a,t){return a.CommentId-t.CommentId}const I={smallData:["feedback-data-small-centered","feedback-content-bordered"],dataContent:["feedback-data-small-centered","feedback-content-bordered"]};class J extends U{constructor(e){super(e,"tr");n(this,"id");n(this,"submittedAt");n(this,"feedbackType");n(this,"userId");n(this,"username");n(this,"content");n(this,"setToHidden");n(this,"controls");n(this,"hideButton");this.id=i.textEl("td",e.ID.toString(),I.smallData);let s=new Date(e.SubmittedAt);this.submittedAt=i.textEl("td",s.toLocaleDateString()+" "+s.toLocaleTimeString(),I.smallData),this.feedbackType=i.textEl("td",e.FeedbackType,I.smallData),this.userId=i.textEl("td",e.UserID.toString(),I.smallData),this.username=i.textEl("td",e.Username,I.smallData),this.content=i.textEl("td",e.Content,I.dataContent),e.Hide==!0?(this.setToHidden=!0,this.strikeThrough()):this.setToHidden=!1,this.controls=i.el("td"),this.hideButton=i.button("hide"),this.hideButton.title="Toggle whether this feedback is hidden and should be shown on future feedback requests.",this.controls.append(this.hideButton),this.clickListen(this.hideButton,this.hideButtonClicked,!0),this.el.append(this.id,this.submittedAt,this.feedbackType,this.userId,this.username,this.content,this.controls)}strikeThrough(){this.id.style.textDecoration="line-through",this.submittedAt.style.textDecoration="line-through",this.feedbackType.style.textDecoration="line-through",this.userId.style.textDecoration="line-through",this.username.style.textDecoration="line-through",this.content.style.textDecoration="line-through"}unstrike(){this.id.style.textDecoration="none",this.submittedAt.style.textDecoration="none",this.feedbackType.style.textDecoration="none",this.userId.style.textDecoration="none",this.username.style.textDecoration="none",this.content.style.textDecoration="none"}hideButtonClicked(){this.setToHidden==!0?(this.setToHidden=!1,this.unstrike()):(this.setToHidden=!0,this.strikeThrough());let e={ID:this.data.ID,SetHiddenTo:this.setToHidden},s=new CustomEvent("toggleFeedbackHidden",{detail:e});document.dispatchEvent(s)}static headerRow(){let e=i.el("tr"),s=i.el("th"),o=i.textEl("th","ID"),l=i.textEl("th","Time"),p=i.textEl("th","Type"),m=i.textEl("th","User ID"),v=i.textEl("th","User"),y=i.textEl("th","Feedback"),L=i.textEl("th","Controls");return e.append(s,o,l,p,m,v,y,L),e}}const H={sectionLabel:["section-label","section-label-as-button"],inputLabel:"section-input-label-medium"};class Se extends T{constructor(){super();n(this,"from");n(this,"to");n(this,"feedbackType");n(this,"requestFeedbackButton");n(this,"dropDownContainer");n(this,"feedbacksTable");n(this,"activeFeedbacks");let e=i.div("Feedback Report",H.sectionLabel);this.dropDownContainer=i.div(),this.feedbacksTable=i.el("table"),this.feedbacksTable.append(J.headerRow()),this.activeFeedbacks=[];let s=i.div();this.from=i.createInputElement("datetime-local"),this.from.value="2020-01-01T00:00",this.to=i.createInputElement("datetime-local"),this.to.value="2025-01-01T00:00",this.feedbackType=i.select(["bug","feature","general","all"]),this.requestFeedbackButton=i.button("Request Feedback"),s.append(i.createContainerWithLabel("From:",H.inputLabel,"div",this.from),i.createContainerWithLabel("To:",H.inputLabel,"div",this.to),i.createContainerWithLabel("Type:",H.inputLabel,"div",this.feedbackType),this.requestFeedbackButton),this.dropDownContainer.append(this.feedbacksTable,s),this.el.append(e,this.dropDownContainer),this.clickListen(e,this.toggleFold,!0),this.clickListen(this.requestFeedbackButton,this.getFeedbackReportClicked,!0)}toggleFold(){this.dropDownContainer.style.display=="none"?this.dropDownContainer.style.display="block":this.dropDownContainer.style.display="none"}update(e){for(let s of this.activeFeedbacks)s.destroy(),s.el.remove();this.activeFeedbacks=[];for(let s of e){let o=new J(s);this.activeFeedbacks.push(o),this.feedbacksTable.append(o.el)}}getFeedbackReportClicked(){var o,l;let e={};e.From=(o=this.from.valueAsDate)==null?void 0:o.valueOf(),e.To=(l=this.to.valueAsDate)==null?void 0:l.valueOf(),e.FeedbackType=this.feedbackType.value;let s=new CustomEvent("viewFeedback",{detail:e});document.dispatchEvent(s)}}const f={labelContainer:"section-container-table",label:"section-container-table-td-label",tableData:"section-container-table-td-data",table:"section-container-table",sectionLabel:["section-label","section-label-as-button"]};class Le extends T{constructor(){super();n(this,"data");n(this,"loggedInCount");n(this,"newestUserID");n(this,"newestUsername");n(this,"userCount");n(this,"lastReportContainer");n(this,"lastUpdate");n(this,"refreshButton");let e=i.div("Users Report",f.sectionLabel);this.lastReportContainer=i.div();let s=i.el("table",f.table);this.loggedInCount=i.el("td",f.tableData),this.newestUserID=i.el("td",f.tableData),this.newestUsername=i.el("td",f.tableData),this.userCount=i.el("td",f.tableData),this.lastUpdate=i.el("td",f.tableData),this.refreshButton=i.button("Get Users Report"),s.append(i.tableRow("Last Update: ",this.lastUpdate,void 0,f.label),i.tableRow("Logged in Count: ",this.loggedInCount,void 0,f.label),i.tableRow("Newest User ID: ",this.newestUserID,void 0,f.label),i.tableRow("Newest Username: ",this.newestUsername,void 0,f.label),i.tableRow("Total Users: ",this.userCount,void 0,f.label)),this.lastReportContainer.append(s,this.refreshButton),this.el.append(e,this.lastReportContainer),this.clickListen(e,this.toggleFold,!0),this.clickListen(this.refreshButton,this.getUsersReportClicked,!0)}update(e){let s=new Date;this.lastUpdate.textContent=s.toLocaleDateString()+" "+s.toLocaleTimeString(),this.loggedInCount.textContent=e.LoggedInUserCount.toString(),this.newestUserID.textContent=e.NewestUserId.toString(),this.newestUsername.textContent=e.NewestUsername,this.userCount.textContent=e.UserCount.toString()}toggleFold(){this.lastReportContainer.style.display=="none"?this.lastReportContainer.style.display="block":this.lastReportContainer.style.display="none"}getUsersReportClicked(){let e=new CustomEvent("viewUsersReport",{detail:{}});document.dispatchEvent(e)}}class Re extends P{constructor(){super();n(this,"usersReport");n(this,"feedbackReport");this.usersReport=new Le,this.feedbackReport=new Se,this.el.append(this.usersReport.el),this.el.append(this.feedbackReport.el)}}const C={cafe:"cafe-container",nav:"nav-bar",navTabButton:"nav-tab",activeNavTab:"active-nav-tab",logoutButton:"nav-tab-logout"};class Pe{constructor(){n(this,"el");n(this,"message");n(this,"registerButton");n(this,"loginButton");n(this,"logoutButton");n(this,"settingsButton");n(this,"commentsButton");n(this,"adminButton");n(this,"currentlyViewing");n(this,"commentsWindow");n(this,"registerWindow");n(this,"loginWindow");n(this,"settingsWindow");n(this,"forgotPWWindow");n(this,"newPassWindow");n(this,"adminWindow");this.el=i.el("div",C.cafe);let t=i.el("nav",C.nav);this.message=new re;let e=i.div();this.registerButton=i.button("Register",[C.navTabButton,C.activeNavTab]),this.loginButton=i.button("Login",[C.navTabButton]),this.settingsButton=i.button("Settings",[C.navTabButton]),this.logoutButton=i.button("Logout",[C.navTabButton,C.logoutButton]),this.commentsButton=i.button("Comments",[C.navTabButton]),this.adminButton=i.button("Admin",[C.navTabButton]),this.registerButton.addEventListener("click",N("register")),this.loginButton.addEventListener("click",N("login")),this.settingsButton.addEventListener("click",N("settings")),this.commentsButton.addEventListener("click",N("comments")),this.logoutButton.addEventListener("click",this.logoutButtonClicked.bind(this)),this.adminButton.addEventListener("click",N("admin")),this.settingsWindow=new ue,this.forgotPWWindow=new ae,this.registerWindow=new oe,this.loginWindow=new ne,this.newPassWindow=new le,this.commentsWindow=new ve,this.adminWindow=new Re,this.loginWindow.hide(),this.currentlyViewing=this.registerWindow,this.el.append(this.message.el,t,e),t.append(this.commentsButton,this.registerButton,this.loginButton,this.logoutButton,this.settingsButton,this.adminButton),e.append(this.registerWindow.el,this.loginWindow.el,this.settingsWindow.el,this.forgotPWWindow.el,this.newPassWindow.el,this.commentsWindow.el,this.adminWindow.el)}setFromState(t){switch(this.hideAll(),t.ownProfile!=null&&this.settingsWindow.ownProfile.updateProfile(t.ownProfile),t.ownProfile==null?this.showLoggedOutButtons():(this.showLoggedInButtons(),this.logoutButton.innerHTML="Logout "+t.ownProfile.LoggedInAs.Username,t.ownProfile.LoggedInAs.IsAdmin&&R(this.adminButton)),t.viewing){case"register":this.currentlyViewing=this.registerWindow,_(this.registerButton);break;case"login":this.currentlyViewing=this.loginWindow,_(this.loginButton);break;case"settings":this.currentlyViewing=this.settingsWindow,_(this.settingsButton);break;case"forgotpassword":this.currentlyViewing=this.forgotPWWindow,_(this.settingsButton);break;case"comments":this.currentlyViewing=this.commentsWindow,_(this.commentsButton);break;case"newPassword":this.currentlyViewing=this.newPassWindow;break;case"admin":this.currentlyViewing=this.adminWindow;break;default:this.currentlyViewing=void 0;break}this.currentlyViewing!=null&&this.currentlyViewing.show(),this.commentsWindow.settingChangeReceived(t.settings)}showLoggedOutButtons(){R(this.registerButton),R(this.loginButton),R(this.commentsButton)}showLoggedInButtons(){R(this.logoutButton),R(this.settingsButton),R(this.commentsButton)}hideAll(){this.newPassWindow.hide(),this.forgotPWWindow.hide(),this.settingsWindow.hide(),this.registerWindow.hide(),this.loginWindow.hide(),this.settingsWindow.hide(),this.commentsWindow.hide(),this.adminWindow.hide(),W(this.registerButton),W(this.loginButton),W(this.logoutButton),W(this.settingsButton),W(this.commentsButton),W(this.adminButton)}logoutButtonClicked(){this.hideAll();let t={},e=new CustomEvent("logout",{detail:t});document.dispatchEvent(e)}}function N(a){return function(){let t=new CustomEvent("StateChangeRequest",{detail:{viewing:a}});document.dispatchEvent(t)}}function W(a){a.style.display="none",Te(a)}function R(a){a.style.display="inline-block"}function _(a){a.classList.add(C.activeNavTab)}function Te(a){a.classList.remove(C.activeNavTab)}class Ae{constructor(){n(this,"sortedBy");n(this,"sortAscending");n(this,"onPseudoUrlPage");n(this,"url");n(this,"viewHidden");this.sortedBy="new",this.sortAscending=!0,this.onPseudoUrlPage=!1,this.url="",this.viewHidden=!1}}class xe{constructor(){n(this,"viewing");n(this,"ownProfile");n(this,"settings");this.viewing="register",this.settings=new Ae,j(this.settings)}stateChangeRequest(t){console.log("Got state change request!",t),t.ownProfile&&(this.ownProfile?Object.assign(this.ownProfile,t.ownProfile):this.ownProfile=t.ownProfile),t.viewing&&(this.viewing=t.viewing),t.settings&&Object.assign(this.settings,t.settings);let e=new CustomEvent("StateChanged",{detail:this});document.dispatchEvent(e)}settingsUpdate(t){console.log("settingsChangeRequest received",t),t.viewHidden!=null&&(this.settings.viewHidden=t.viewHidden),t.sortedBy!=null&&(this.settings.sortedBy=t.sortedBy),t.sortAscending!=null&&(this.settings.sortAscending=t.sortAscending),t.onPseudoUrlPage!=null&&(this.settings.onPseudoUrlPage=t.onPseudoUrlPage),t.url!=null&&(this.settings.url=t.url),j(this.settings)}loadProfile(t,e){this.ownProfile=t,this.ownProfile&&e!=!0?this.viewing="none":this.ownProfile==null&&e!=!0&&(this.viewing="login"),De(this)}}function De(a){let t=new CustomEvent("StateChanged",{detail:a});document.dispatchEvent(t)}function j(a){let t=new CustomEvent("SettingsChange",{detail:a});document.dispatchEvent(t)}const S="ca-browser-storage";class Ie{constructor(){n(this,"fetcher");n(this,"state");n(this,"navbar");n(this,"dispatcher");this.fetcher=new ie,this.state=new xe,this.navbar=new Pe,this.dispatcher=new Z,this.setClientEventListeners(),this.setStateEventListeners(),this.navbar.setFromState(this.state),this.deserializePick(),typeof browser>"u"&&console.warn("You are not using comment anywhere as an extension. This is dangerous, and your credentials could be stolen!")}deserialize(t){if(console.log("attempting to deserialize",t),t){if(t.state!=null){let e=new CustomEvent("StateChangeRequest",{detail:t.state});document.dispatchEvent(e)}t.token!=null&&(console.log("Setting token in fetcher to",t.token),this.fetcher.setToken(t.token))}else console.error("No information to deserialize!")}deserializePick(){let t=this;if(typeof browser<"u")browser.storage.local.get().then(e=>{if(e){let s=JSON.parse(e[S]);t.deserialize(s)}});else{let e=localStorage.getItem(S);if(e){let s=JSON.parse(e);console.log("PARSED DATA:",s),t.deserialize(s)}}}serialize(){let t={state:this.state,token:this.fetcher.token};typeof browser<"u"?browser.storage.local.set({[S]:JSON.stringify(t)}).then(()=>{console.log("Browser saved this data:",t)}):(localStorage.setItem(S,JSON.stringify(t)),console.log("LocalStorage saved this data:",t))}clearToken(){if(typeof browser<"u")browser.storage.local.get(S).then(t=>{let e=t;e&&(e.token="",e.state.ownProfile=void 0,browser.storage.local.set({[S]:e}))});else{let t=localStorage.getItem(S);if(t!=null){let e=JSON.parse(t);e.token="",e.state.ownProfile=void 0,localStorage.setItem(S,JSON.stringify(e))}}}setClientEventListeners(){let t=this,e=t.checkForResponses.bind(this);document.addEventListener("register",s=>{let o=s.detail;console.log("REGISTER EVENT RECEIVED WITH DATA: ",o),t.fetcher.fetch("register","POST",o,e)}),document.addEventListener("login",s=>{let o=s.detail;console.log("LOGIN EVENT RECEIVED WITH DATA: ",o),t.fetcher.fetch("login","POST",o,e)}),document.addEventListener("logout",s=>{let o=s.detail;console.log("LOGOUT EVENT RECEIVED WITH DATA: ",o),t.fetcher.fetch("logout","PUT",o,e).then(()=>{t.clearToken()})}),document.addEventListener("pwResetReq",s=>{let o=s.detail;console.log("FORGOT PASSWORD EVENT RECEIVED WITH DATA: ",o),t.fetcher.fetch("pwResetReq","POST",o,e)}),document.addEventListener("newPassword",s=>{let o=s.detail;console.log("SET NEW PASSWORD EVENT RECEIVED WITH DATA: ",o),t.fetcher.fetch("newPassword","POST",o,e)}),document.addEventListener("changeEmail",s=>{let o=s.detail;console.log("CHANGE EMAIL EVENT RECEIVED WITH DATA: ",o),t.fetcher.fetch("changeEmail","POST",o,e)}),document.addEventListener("changeProfile",s=>{let o=s.detail;console.log("CHANGE PROFILE BLURB EVENT RECEIVED WITH DATA: ",o),t.fetcher.fetch("changeProfile","POST",o,e)}),document.addEventListener("getComments",s=>{let o=s.detail;console.log("GET COMMENTS EVENT RECEIVED WITH DATA: ",o),t.fetcher.fetch("getComments","POST",o,e)}),document.addEventListener("newComment",s=>{let o=s.detail;console.log("NEW COMMENT EVENT RECEIVED WITH DATA: ",o),t.fetcher.fetch("newComment","POST",o,e)}),document.addEventListener("voteComment",s=>{let o=s.detail;console.log("NEW COMMENT EVENT RECEIVED WITH DATA: ",o),t.fetcher.fetch("voteComment","POST",o,e)}),document.addEventListener("viewUsersReport",s=>{let o=s.detail;console.log("NEW VIEW USERSREPORT EVENT RECEIVED WITH DATA: ",o),t.fetcher.fetch("viewUsersReport","POST",o,e)}),document.addEventListener("viewFeedback",s=>{let o=s.detail;console.log("NEW VIEW FEEDBACK EVENT RECEIVED WITH DATA: ",o),t.fetcher.fetch("viewFeedback","POST",o,e)}),document.addEventListener("toggleFeedbackHidden",s=>{let o=s.detail;console.log("NEW TOGGLE FEEDBACK HIDDEN EVENT RECEIVED WITH DATA: ",o),t.fetcher.fetch("toggleFeedbackHidden","POST",o,e)}),document.addEventListener("FrontEndError",s=>{console.error("Front End Error!"),t.navbar.message.updateMessage(s.detail)})}setStateEventListeners(){let t=this;document.addEventListener("StateChangeRequest",e=>{t.state.stateChangeRequest(e.detail)}),document.addEventListener("StateChanged",()=>{console.log("state change event received",t.state),t.navbar.setFromState(t.state),t.serialize()})}checkForResponses(){let t=this.fetcher.getAndClearResponses();console.log("ðŸŽ…ðŸ¤¶ðŸ¤¶ All server responses:",t),this.dispatcher.dispatch(t,this),this.serialize()}}const Y=new Ie;document.body.append(Y.navbar.el);console.log("Comment Anywhere Front End running:",Y);
